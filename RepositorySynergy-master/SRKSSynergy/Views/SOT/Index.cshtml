@model IList<SRKSSynergy.Models.SOT>
@using SRKSSynergy.Helpers
@{
    ViewBag.Title = "Index";
}
@{int slno = 1;}

<link href="~/Content/bootstrap/css/bootstrap-responsive.css" rel="stylesheet" />
<link href="~/Content/bootstrap/css/bootstrap.css" rel="stylesheet" />
<link href="~/Content/bootstrap/css/MDB.css" rel="stylesheet" />
<link href="~/Content/bootstrap/css/jquery-min.css" rel="stylesheet" />
<script src="~/Content/bootstrap/js/jquery.js"></script>
<script src="~/Content/bootstrap/js/jquery-ui-min.js"></script>
<script src="~/Content/bootstrap/js/accounting.js"></script>
<script src="~/Content/bootstrap/js/jquery.mtz.monthpicker.js"></script>



<script>
    $(document).ready(function () {
        $('.sss').monthpicker();
    });
</script>

<div class="bcgr" style="min-width:1450px">
    @using (Html.BeginForm("Index", "SOT", Model, FormMethod.Post))
    {
        @Html.AntiForgeryToken()
        @Html.ValidationSummary(true)
        <div style="background: gray; padding-bottom: 15px">
            <p class="txtft">Sales Opportunity Tracker</p>

        </div>
        @Html.ActionLink("SOT Order Conversion List", "SOTTempList", "SOT", new { @class = "btn btn-primary", @id = "cnlead", @name = "cnlead", @style = "text-decoration:none;float:left; margin-left:1000px;margin-top:5px;margin-bottom:5px;display:inline;width: 200px; height: 30px;"  })
        <div class="row" style="padding-top: 10px">
            <div class=" row show-grid">
                <div style="padding-top: 30px;padding-left:40px">
                    <table class="table-hover">
                        <thead>
                            <tr style="background: #BBBEBD">
                                <th style="width: 30px; text-align: center" class="fntst cal botbor">Serial No</th>
                                <th style="width: 180px; text-align: center" class="fntst cal botbor">Company Name</th>
                                <th style="width: 130px; text-align: center" class="fntst cal botbor">Sales Engg Name</th>
                                <th style="width: 110px; text-align: center" class="fntst cal botbor">Quotation No</th>
                                <th style="width: 100px; text-align: center" class="fntst cal botbor">Model</th>
                                <th style="width: 60px; text-align: center" class="fntst cal botbor">Quantity</th>
                                <th style="width: 150px; text-align: center" class="fntst cal botbor">Order Activeness</th>
                                <th style="width: 70px; text-align: center" class="fntst cal botbor">BYJT Chances(%)</th>
                                <th style="width: 150px; text-align: center" class="fntst cal botbor">Top Competitor</th>
                                <th style="width: 80px; text-align: center" class="fntst cal botbor">Expected Order Month</th>
                                <th style="width: 70px; text-align: center" class="fntst cal botbor">Additional Comments</th>
                            </tr>
                        </thead>
                        @*@foreach (var item in Model)*@
                        @for (int i = 0; i < Model.Count; i++)
                        {
                            <tr>
                                <td style="width: 50px;text-align: center;">
                                    @slno
                                </td>
                                <td style="width: 150px;text-align: center;">
                                    <label class="fntst ">@Html.DisplayFor(m => m[i].QGEquipGeneralData.MDBGeneralData.OrganizationName)</label>
                                </td>
                                <td style="width: 110px;text-align: center;">
                                    <label class="fntst">@Html.DisplayFor(m => m[i].QGEquipGeneralData.SalesName)</label>
                                </td>
                                <td style="width: 110px;text-align: center;">
                                    <label class="fntst">@Html.DisplayFor(m => m[i].QGEquipGeneralData.QuotationNumber)</label>
                                </td>
                                <td style="width: 100px;text-align: center;">
                                    <label class="fntst">@Html.DisplayFor(m => m[i].Equipment)</label>
                                </td>
                                <td style="width: 60px;text-align: center;">
                                    <label class="fntst">@Html.DisplayFor(m => m[i].Quantity)</label>
                                </td>
                                <td style="width: 150px;text-align: center;">
                                    @Html.MyDropdownListFor(m => m[i].Orderactive, (IList<MyHelpers.MySelectItem>)ViewData["active" + slno], null, new { id = "active" + slno, @class = "fntst dropped",@style="width:130px", @name = "active" + slno, @required ="required"})
                                </td>
                                <td style="width: 60px;text-align: center;">
                                    @Html.MyDropdownListFor(m => m[i].BYJTChances, (IList<MyHelpers.MySelectItem>)ViewData["chances" + slno], null, new { id = "chances" + slno, @class = "fntst chances", @name = "chances" + slno,@style="width:65px", @required ="required" })
                                </td>
                                <td style="width: 150px;text-align: center;">
                                    @Html.MyDropdownListFor(m => m[i].TOPCompetitors, (IList<MyHelpers.MySelectItem>)ViewData["comp" + slno], null, new { id = "comp" + slno, @class = "fntst competitor",@style="width:150px", @name = "comp" + slno, @required ="required" })
                                </td>
                                <td style="width: 80px;text-align: center;">
                                    @Html.TextBoxFor(m => m[i].Expectedorder, new { @id = "startdate"+ slno, @name = "startdate"+ slno, @placeholder = "Select Month", @class = "input-mini4 fntst sss eom", @style = "width:130px" ,@required = "required"})
                                </td>
                                <td style="text-align: center; width: 70px">
                                    @Html.TextAreaFor(m => m[i].AdditionalComments, new { rows = 2, columns = 2, id = "addcomc" + slno, @class = "fntst", @placeholder = "Additional Comments" , @required ="required",@onchange="tigrfunc(this.id);"
                               })

                                </td>
                                <td style="text-align: center;">
                                    @Html.TextBoxFor(m => m[i].QGID, new { @style = "display:none;" })
                                    @Html.TextBoxFor(m => m[i].SOTID, new { @style = "display:none;" })
                                    @Html.TextBoxFor(m => m[i].CPID, new { @style = "display:none;" })
                                    @Html.TextBoxFor(m => m[i].Equipment, new { @style = "display:none;" })
                                    @Html.TextBoxFor(m => m[i].Quantity, new { @style = "display:none;" })
                                </td>
                            </tr>
                            slno++;
                        }
                    </table>
                    <input type="text" id="getslno" value=@slno style="display:none;" />
                </div>
                <div class="row" style="padding-top: 20px; padding-left: 300px; padding-bottom: 20px">
                    <div class=" row show-grid">
                        <div class="span10">
                            <div class="span3 cent">
                                <input type="submit" value="Submit" class="btn btn-large btn-success" onclick="return funcoverall();"/>
                                <div></div>
                                @*<button class="btn btn-large btn-success" type="button">Generate Report</button>*@
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    }
</div>
<script type="text/javascript">
    var overalres = false;
    function tigrfunc(trgrdid) {
        var chartr = $("#" + trgrdid).val();
        if (chartr.length >= 4) {
            overalres = true;
        } else {
            alert('The field Comments must be a string with a minimum length of 4 and a maximum length of 160.');
            overalres = false;
        }
    }
    function funcoverall() {

        if (overalres == false) {
            alert('Please fill all the comment fields');
            return false;
        } else {
            //alert('true');
            return true;
        }

    }
</script>
<link href="~/Content/bootstrap/css/jquery.ui.autocomplete.css" rel="stylesheet" />
<link href="~/Content/bootstrap/css/datepicker.css" rel="stylesheet" />
<script src="~/Content/bootstrap/js/jquery.js"></script>
<script src="~/Content/bootstrap/js/jquery-1.9.1.js"></script>
<script src="~/Content/bootstrap/js/jquery-2.1.4.min.js"></script>
<script src="~/Content/bootstrap/js/jquery1.8.2.min.js"></script>
<script src="~/Content/bootstrap/js/jquery-ui-1.10.3.js"></script>
<script src="~/Content/bootstrap/js/bootstrap-datepicker.js"></script>
<script src="~/Content/bootstrap/js/jValidations.js"></script>

<script src="~/Content/bootstrap/js/jquery.mtz.monthpicker.js"></script>

<script>
    $(document).ready(function () {
        $(".dropped").change(function () {
            var name = $(this).val();
            //alert(name);
            if (name == "Project Dropped") {
                $(this).parents('td:first').siblings("td").children(".chances").attr('disabled', 'disabled');
                $(this).parents('td:first').siblings("td").children(".competitor").attr('disabled', 'disabled');
                $(this).parents('td:first').siblings("td").children(".eom").attr('disabled', 'disabled');
            }
            else {

                $(this).parents('td:first').siblings("td").children(".chances").removeAttr('disabled');
                $(this).parents('td:first').siblings("td").children(".competitor").removeAttr('disabled');
                $(this).parents('td:first').siblings("td").children(".eom").removeAttr('disabled');
            }
        });
    });
</script>