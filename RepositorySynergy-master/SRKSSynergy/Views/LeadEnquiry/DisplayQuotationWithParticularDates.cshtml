@model IEnumerable<SRKSSynergy.Models.QGEquipGeneralData>
@{
    ViewBag.Title = "DisplayQuotationWithParticularDates";
    Layout = null;
    int slno = 1;
}

<link href="~/Content/bootstrap/css/bootstrap.css" rel="stylesheet" />
<link href="~/Content/bootstrap/css/bootstrap-responsive.css" rel="stylesheet" />
<link href="~/Content/bootstrap/css/MDB.css" rel="stylesheet" />
<link href="~/Content/bootstrap/css/jquery.ui.autocomplete.css" rel="stylesheet" />
<link href="~/Content/bootstrap/css/print.css" media="print" rel="stylesheet" />
<script src="~/Content/bootstrap/js/jquery.js"></script>
<script src="~/Content/bootstrap/js/jquery-ui.js"></script>
<script src="~/Content/bootstrap/js/jquery1.8.2.min.js"></script>
<script src="~/Content/bootstrap/js/jQuery%20UI%201.9.2.js"></script>

<div class="bcgr" style="height:14000px;width:1100px;padding-top:5%">
	<div class="navbar-fixed-top" style="background: gray; padding-bottom: 15px">
		<p class="txtft1">Quotation List</p>
        <div class="navbar navbar-fixed-top" style="margin: -1px -1px 0;">
                       <ul class="nav pull-right " style="padding-right: 50px">
                            <li style="padding-top: 10px;font:20px;color:white;">
                               <a href="/Account/Login" class="btn" style="width:50px;height:15px;background:#009B91;text-decoration:none;font-size:14px;color:white;"><strong>Logout</strong></a>
                            </li>
                        </ul>                   
                    </div>
        <div class="navbar navbar-fixed-top" style="margin: -1px -1px 0;">
            <ul class="nav pull-left " style="padding-right: 50px">
                <li style="padding-top: 7%; font: 20px; color: white;">
                    <a href="/Account/LiveDashBoard" class="btn" style="width: 50px; height: 15px; background: #009B91; text-decoration: none; font-size: 14px; color: white; display: inline;">Live DashBoard</a>
                    <a href="/MainDashboard/MainDashboard" class="btn" style="width: 50px; height: 15px; background: #009B91; text-decoration: none; font-size: 14px; color: white; display: inline">Main DashBoard</a>
                </li>
            </ul>
        </div>
	</div>
   
    <div style="background:#BBBEBD;padding-bottom: 5px;height:40px">
		<p class="txtft" style="font-size:22px">Period    &nbsp; &nbsp;  &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;  &nbsp; &nbsp; &nbsp;
                      From:- @Session["Fromdate"]&nbsp;&nbsp; &nbsp; &nbsp;To:- @Session["Todate"]
          &nbsp;&nbsp;&nbsp; &nbsp;Total Quotation Generated:-@ViewBag.tqg </p>
	</div>
    
	<form action="@Url.Action("QuotationGenerated", "LeadEnquiry")" method="post">
		           
             @*Success Message*@
        @if (TempData["Success"] != null)
		{
			<p style="color: red; font-weight: 900; padding-left: 170px">@TempData["Success"]</p>
		}

		@* Table for Equipment *@
		<table class="table table-hover" style="width: 1400px;">
			<tr style="background: #BBBEBD; padding-bottom: 10px; padding-top: 10px">
				<th style="width: 80px; text-align: center">
					<span style="font-family: Calibri; font-size: 18px; padding-bottom: 10px; padding-top: 10px">Serial No.</span>
				</th>
				<th style="width: 160px; text-align: center">
					<span style="font-family: Calibri; font-size: 18px; padding-bottom: 10px; padding-top: 10px">Channel Partner</span>
				</th>
				<th style="width: 160px; text-align: center">
					<span style="font-family: Calibri; font-size: 18px; padding-bottom: 10px; padding-top: 10px">Quotation Generated</span>
				</th>    
                <th style="width: 160px; text-align: center">
					<span style="font-family: Calibri; font-size: 18px; padding-bottom: 10px; padding-top: 10px">View Leads</span>
				</th>               
     			<th style="width: 250px;" class="noPrint"></th>
			</tr>                       
            @{
                        DateTime now = DateTime.Now;
                        DateTime fm = new DateTime(now.Year, now.Month, 1);
                        DateTime td = System.DateTime.Now;
                        
                        SRKSSynergy.Models.SRKS_Synergy db = new SRKSSynergy.Models.SRKS_Synergy();
                       
                        DateTime dtt = ViewBag.Fromdate;
                        DateTime dtt1 = ViewBag.Todate;

                        String frda1 = dtt.ToString("yyyy-MM-dd");
                        String toda1 = dtt1.ToString("yyyy-MM-dd");

                        DateTime frda = DateTime.Parse(frda1).Date;
                        DateTime toda = DateTime.Parse(toda1).Date;

                        var jfdate = frda;
                        var jtdate = toda;
                        int tqg = 0;                 
                        
             }
			@foreach (var item in Model)
			{
				<tr>
					<td style="width: 70px; text-align: center; font-family: Calibri; font-size: 18px">
						@slno
					</td>
					<td style="width: 120px; text-align: center; font-family: Calibri; font-size: 18px">
                       @if (item.CPID != 0)
                        {
                            {
                                var name = db.ChannelPartners.Where(m => m.CPID == item.CPID).Select(m => m.CPName).SingleOrDefault();
                                ViewBag.drp1 = name;
                            }                        
                            @ViewBag.drp1
                        }
                        else
                        {
                            <label style="font-family:Calibri;font-size:18px;">Buhler India Pvt Ltd</label>
                        }
						@*@Html.DisplayFor(modelItem => item.c)*@                         
					</td>
                    <td style="width: 150px; text-align: center; font-family: Calibri; font-size: 18px">
                        @{               
                       var tll = db.QGEquipGeneralData.Where(m => m.IsRiceMill == 0).Where(m => m.CPID == item.CPID).Where(m => m.QuotationDate >= jfdate && m.QuotationDate <= jtdate).Count();
                       ViewBag.tll = tll;

                       tqg = tqg + tll;
                       ViewBag.tqg = tqg;
                        }

                        @ViewBag.tll
                        @*@Html.DisplayFor(modelItem => item.IsStatus)*@
                    </td> 
                    <td style="width: 150px; text-align: center; font-family: Calibri; font-size: 18px">
                       @Html.ActionLink("View", "jViewQuotationIndividual","LeadEnquiry", new { id=item.CPID }, new { @class = "btn btn-success", @Style = "text-decoration:none" })
				     </td>                    
                    </tr>                 
                 slno++;				
			}
     		</table>   
        </form>    	
        </div>



